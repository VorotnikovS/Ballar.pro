<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Ballar — Rive Site</title>
  <script src="https://unpkg.com/@rive-app/webgl"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      width: 100%;
      height: 100%;
      background-color: black;
    }

    canvas {
      display: block;
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>
<body>
  <canvas id="rive-canvas"></canvas>

  <script>
    const canvas = document.getElementById("rive-canvas");

    const dpr = window.devicePixelRatio || 1;
    canvas.width = window.innerWidth * dpr;
    canvas.height = window.innerHeight * dpr;
    canvas.style.width = "100vw";
    canvas.style.height = "100vh";

    let scrollYInput;

    const riveInstance = new rive.Rive({
      src: "ballar.riv",
      canvas: canvas,
      autoplay: true,
      artboard: "Ballar",
      stateMachines: ["State Machine 1"],
      layout: new rive.Layout({
        fit: rive.Fit.FitWidth,
        alignment: rive.Alignment.TopCenter
      }),
      onLoad: () => {
        console.log("✅ Rive animation loaded.");

        const inputs = riveInstance.stateMachineInputs("State Machine 1");

        // Передаём ширину экрана в input 'Size'
        const sizeInput = inputs.find(i => i.name === "Size");
        if (sizeInput) {
          sizeInput.value = window.innerWidth;
          console.log("📏 Передано в Rive Size:", sizeInput.value);
        } else {
          console.warn("❗️ Input 'Size' не найден в State Machine 1");
        }

        // Подключаем scrollY input
        scrollYInput = inputs.find(i => i.name === "ScrollY");
        if (!scrollYInput) {
          console.warn("❗️ Input 'ScrollY' не найден в State Machine 1");
        }
      },
      onError: (err) => console.error("❌ Ошибка Rive:", err)
    });

    // Прокрутка колесиком мыши
    window.addEventListener("wheel", (e) => {
      if (scrollYInput) {
        scrollYInput.value += e.deltaY * 0.3;
        console.log("🖱 ScrollY =", scrollYInput.value);
         // Ограничиваем диапазон от 0 до 2000
    scrollYInput.value = Math.max(0, Math.min(2000, scrollYInput.value));

    console.log("🖱 ScrollY =", scrollYInput.value);
      }
    });
  </script>
</body>
</html>
